<b>Please specify the source</b>
<form novalidate #sourceSelectionForm="ngForm">
  <div class="deploy-step2-form">
    <mat-form-field>
      <mat-select class="reset-margin" placeholder="Source Type" name="sourceType" [(ngModel)]="sourceType" (change)="setSourceType($event.value)" required>
        <mat-option *ngFor="let sourceType of sourceTypes" [value]="sourceType">
          {{ sourceType.name }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <div *ngIf="(sourceType$ | async)?.id === 'git'">
      <div>
        <mat-radio-group [(ngModel)]="sourceSubType" name="sourceSubType" (change)="setSourceSubType($event.value)" class="deploy-step2-form__radio" required>
         <mat-radio-button *ngFor="let type of sourceSubTypes" name="sourceSubType" [value]="type">
           {{ type.name }}
         </mat-radio-button>
        </mat-radio-group>
     </div>
     <div *ngIf="(sourceSubType$ | async) === 'github'">
       <div class="github-project-details">
         <div>
            <mat-form-field >
                <input matInput [(ngModel)]="repository" placeholder="Project" name="projectName" appGithubProjectExists required>
                <mat-error *ngIf="sourceSelectionForm.controls.projectName?.hasError('githubProjectExists')">
                    Project doesn't exist
                  </mat-error>
              </mat-form-field>
         </div>
          <div *ngIf="projectInfo$| async as projectInfo" class="deploy-step2-form__project-info-group">
              <div >
                <img src="{{projectInfo.owner.avatar_url}}">
              </div>
              <div src="description">
                <div>
                    <a href="{{projectInfo.html_url}}">{{projectInfo.full_name}}</a>
                </div>
                <div class="centered">
                    <a >{{projectInfo.description}}</a>
                </div>
              </div>
          </div>
       </div>

        <mat-select placeholder="Branch"  [(ngModel)]="repositoryBranch"  name="repositoryBranch" (change)="fetchCommit($event.value)" required>
            <mat-option *ngFor="let branch of repositoryBranches$ | async" [value]="branch">
              {{ branch.name }}
            </mat-option>
          </mat-select>

        <div *ngIf="commitInfo$| async as commitInfo" class="deploy-step2-form__project-info-group">
            <div >
              <img src="{{commitInfo.author.avatar_url}}">
            </div>
            <div src="description">
              <div>
                  <a href="{{commitInfo.html_url}}">{{commitInfo.sha | limitTo:8}}</a>
              </div>
              <div>
                  <a>{{commitInfo.commit.message}}</a>
              </div>
              <div class="author-info">
                <div>
                    <a>{{commitInfo.commit.author.name}}</a>
                </div>
                <div >
                    <a>{{commitInfo.commit.author.date | date: 'medium'}}</a>
                </div>
              </div>
            </div>
        </div>
     </div>
     <div *ngIf="(sourceSubType$ | async) === 'giturl'">
        <mat-form-field >
          <input matInput [(ngModel)]="repository" placeholder="Project" name="projectName" required>
        </mat-form-field>
        <mat-form-field >
          <input matInput [(ngModel)]="repositoryBranch.name" placeholder="Branch or Tag" name="projectBranch" required>
        </mat-form-field>
     </div>
    </div>
  </div>
</form>
