<div class="hcp-cp-summary">

  <div class="row">
    <cpu-card
      node="*"
      node-metrics="cpuSummaryCtrl.all.metrics"
      metrics-node-name="*"
      show-utilization-donut="false"
      title="{{ 'Total CPU Usage' | translate }}"
    ></cpu-card>
  </div>
  <div class="row">
    <summary-control-bar
      summary-name="cpu-summary"
      guid="{{ cpuSummaryCtrl.guid }}"
      group-name="cpu" ,
      show-card-layout="cpuSummaryCtrl.metricsDataService.cpuSummary.showCardLayout"
      collection="cpuSummaryCtrl.nodes"
      filtered-collection="cpuSummaryCtrl.filteredNodes"
      filtered-properties="['spec.hostname','spec.profile']"
    >
    </summary-control-bar>
  </div>

  <div class="row">
    <div class="cpu-summary-content">
      <div class="card-view" ng-if="cpuSummaryCtrl.metricsDataService.cpuSummary.showCardLayout">
        <div class="cpu-cards">
          <div class="tile-layout-container">
            <div class="cpu-card tile-layout-parent" ng-repeat="node in cpuSummaryCtrl.filteredNodes">
              <cpu-card node="{{ node.spec.hostname }}"
                        metrics-node-name="{{ node.spec.metricsNodeName }}"
                        show-utilization-donut="true"
                        title="{{  node.spec.hostname }}"
                        node-metrics="node.metrics"
              ></cpu-card>
            </div>
          </div>
        </div>
      </div>

      <div class="list-view" ng-if="!cpuSummaryCtrl.metricsDataService.cpuSummary.showCardLayout">
        <div ng-if="cpuSummaryCtrl.nodes.length"
             class="metrics-table">
          <table class="table"
                 st-table="cpuSummaryCtrl.stNodes"
                 st-safe-src="cpuSummaryCtrl.filteredNodes"
                 st-binding="cpuSummaryCtrl.table">
            <thead>
            <tr>
              <th class="column"
                  ng-repeat="column in cpuSummaryCtrl.tableColumns"
                  st-skip-natural="true"
                  ng-class="{'column-no-sort': column.noSort}"
                  st-sort="{{ column.noSort ? '' : column.value }}"
                  st-descending-first="{{ column.descendingFirst ? 'true' : '' }}">
                <div class="column-div">
                  <div class="column-text" translate>{{ column.name }}</div>
                  <div class="smart-separator"></div>
                  <div class="column-no-sort"></div>
                  <div class="column-sorter-asc"></div>
                  <div class="column-sorter-desc"></div>
                </div>
              </th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="node in cpuSummaryCtrl.stNodes">
              <td class="table-view-app-name">
                {{ node.spec.hostname }}
              </td>
              <td>
                <percent-gauge
                  value="{{ node.metrics.cpuUtilization.latestDataPoint }}"
                  value-text="{{ cpuSummaryCtrl.getCpuUsageValue(node) }} MC / {{ node.metrics.cpuLimit }} MC">
                </percent-gauge>
              </td>
              <td>
                <sparkline-graph ng-if="node.metrics.cpuUtilization.timeSeries.length > 0"
                                 timeseries="node.metrics.cpuUtilization"
                >
                </sparkline-graph>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>

    </div>
  </div>

</div>
