<h4 class="step-title" translate>Name your application and select deploy location.</h4>

<p translate>
  Create a unique name for your application. The name you create will be reserved even if you exit.
</p>

<div class="form-group form-group-large"
  ng-class="{'has-error': wizardForm['application-name-form'].appName.$invalid && wizardForm['application-name-form'].appName.$dirty}"
  focusable-input>
  <label class="control-label"
    for="add-app-workflow-application-name" required translate>
    Application name
  </label>
  <span class="control-message" >
    <span
      translate
      ng-if="wizardForm['application-name-form'].appName.$error.required">
      Application name is required
    </span>
    <span
      translate
      ng-if="wizardForm['application-name-form'].appName.$error.helionUnique">
      This name already exists. Choose a new one.
    </span>
  </span>
  <input
    ng-model="wizardCtrl.options.userInput.name"
    type="text" class="form-control"
    id="add-app-workflow-application-name"
    name="appName"
    helion-unique items="wizardCtrl.options.apps" key="'label'"
    required
    autofocus/>
</div>

<p class="control-title" translate>Select deploy location</p>

<div class="form-group form-group-large">
  <label class="control-label" required translate>Cluster</label>
  <select-input
    arrow-icon="helion-icon helion-icon-Up_tab helion-icon-r180"
    ng-model="wizardCtrl.options.userInput.serviceInstance"
    input-options="wizardCtrl.options.serviceInstances"
    placeholder="{{'Select Cluster' | translate}}"
    tabindex="0" required>
  </select-input>
</div>

<div class="form-group form-group-large">
  <label class="control-label" required translate>Organization</label>
  <select-input
    arrow-icon="helion-icon helion-icon-Up_tab helion-icon-r180"
    ng-model="wizardCtrl.options.userInput.organization"
    input-options="wizardCtrl.options.organizations"
    placeholder="{{'Select Organization' | translate}}"
    tabindex="0" required>
  </select-input>
</div>

<div class="form-group form-group-large">
  <label class="control-label" required translate>Space</label>
  <select-input
    arrow-icon="helion-icon helion-icon-Up_tab helion-icon-r180"
    ng-model="wizardCtrl.options.userInput.space"
    input-options="wizardCtrl.options.spaces"
    placeholder="{{'Select Space' | translate}}"
    tabindex="0" required>
  </select-input>
</div>

<p class="control-title" translate>Create a route</p>

<div class="new-route">
  <div class="form-group"
    ng-class="{'has-error' : wizardForm['application-name-form'].routeName.$invalid && wizardForm['application-name-form'].routeName.$dirty}"
    focusable-input>
    <label class="control-label"
      for="add-app-workflow-application-host" required translate>
      Host
    </label>
    <span class="control-message">
      <span
        translate
        ng-if="wizardForm['application-name-form'].routeName.$error.required">
        Host is required
      </span>
      <span
        translate
        ng-if="wizardForm['application-name-form'].routeName.$error.pattern">
        Invalid format
      </span>
    </span>
    <input
      ng-model="wizardCtrl.options.userInput.host"
      type="text" class="form-control"
      id="add-app-workflow-application-host"
      name="routeName"
      ng-pattern="/^[a-zA-Z0-9\-_]*$/"
      ng-disabled="!wizardCtrl.options.userInput.domain"
      required>
  </div>

  <div class="form-group">
    <label class="control-label" required translate>Domain</label>
    <select-input
      arrow-icon="helion-icon helion-icon-Up_tab helion-icon-r180"
      ng-model="wizardCtrl.options.userInput.domain"
      input-options="wizardCtrl.options.domains"
      placeholder="{{'Select Domain' | translate}}"
      tabindex="0" required>
    </select-input>
  </div>

  <div class="form-group"
    ng-class="{'has-error' : wizardForm['application-name-form'].port.$invalid && wizardForm['application-name-form'].port.$dirty}"
    focusable-input>
    <label class="control-label"
      for="add-app-workflow-application-port" translate>
      Port (optional)
    </label>
    <span class="control-message">
      <span
        translate
        ng-if="wizardForm['application-name-form'].port.$error.pattern">
        Invalid port format or value
      </span>
    </span>
    <input
      ng-model="wizardCtrl.options.userInput.port"
      type="text" class="form-control"
      id="add-app-workflow-application-port"
      ng-pattern="/^0*(?:6553[0-5]|655[0-2][0-9]|65[0-4][0-9]{2}|6[0-4][0-9]{3}|[1-5][0-9]{4}|[1-9][0-9]{1,3}|[0-9])$/"
      ng-disabled="!wizardCtrl.options.userInput.domain"
      name="port">
  </div>

  <div class="form-group"
    ng-class="{'has-error' : wizardForm['application-name-form'].path.$invalid && wizardForm['application-name-form'].path.$dirty}"
    focusable-input>
    <label class="control-label"
      for="add-app-workflow-application-path" translate>
      Path (optional)
    </label>
    <span class="control-message">
      <span
        translate
        ng-if="wizardForm['application-name-form'].path.$error.pattern">
        Should look like: /a/valid/path
      </span>
    </span>
    <input
      ng-model="wizardCtrl.options.userInput.path"
      type="text" class="form-control"
      id="add-app-workflow-application-path"
      ng-pattern="/^\/[a-zA-Z0-9\-_\/]+$/"
      ng-disabled="!wizardCtrl.options.userInput.domain"
      name="path">
  </div>
</div>

<br>
<div class="alert alert-danger" ng-show="wizardCtrl.options.errors.invalidRoute" translate>
  This route already exists. Choose a new one.
</div>
