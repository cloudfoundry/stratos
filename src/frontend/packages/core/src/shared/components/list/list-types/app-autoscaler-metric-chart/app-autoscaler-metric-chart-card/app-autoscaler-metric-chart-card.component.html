<mat-card *ngIf="metricData$ | async as metricData">
  <mat-card-header>
    <mat-card-title>
      {{row.metadata.guid}} <br />
      <div class="autoscaler-metric-subtitle">
        {{paramsMetrics['start-time'] / 1000000 | date:'medium'}} ~
        {{paramsMetrics['end-time'] / 1000000 | date:'medium'}}
      </div>
    </mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <div class="autoscaler-chart-gauge">
      <ngx-charts-gauge [margin]="[0,30,0,70]" [customColors]="[metricData[0].entity.latest.colorTarget[0]]"
        [results]="[metricData[0].entity.latest.target[0]]" [animations]="true" [textValue]="" [scheme]="'cool'"
        [min]="0" [max]="metricData[0].entity.chartMaxValue" [units]="metricData[0].entity.unit" [angleSpan]="240"
        [startAngle]="-120" [showAxis]="true" [bigSegments]="10" [smallSegments]="5" [tooltipDisabled]="false"
        (select)="select($event)">
      </ngx-charts-gauge>
    </div>
    <div class="autoscaler-chart-bar">
      <div class="autoscaler-chart-bar-combo">
        <app-autoscaler-combo-chart-component [scheme]="comboBarScheme" [colorSchemeLine]="lineChartScheme"
          [customColors]="metricData[0].entity.formated.colorTarget" [results]="metricData[0].entity.formated.target"
          [animations]="true" [lineChart]="metricData[0].entity.markline" [tooltipDisabled]="false"
          [yLeftAxisScaleFactor]="yLeftAxisScale" [gradient]="false" [xAxis]="true" [yAxis]="true" [legend]="false"
          [showGridLines]="true" [showXAxisLabel]="true" [showYAxisLabel]="true"
          [yAxisLabel]="metricData[0].entity.unit" [metricName]="row.metadata.guid"
          [yScaleMax]="metricData[0].entity.chartMaxValue" (select)="onSelect($event)">
        </app-autoscaler-combo-chart-component>
      </div>
      <div class="autoscaler-chart-bar-legend">
        <ngx-charts-bar-vertical [scheme]="'cool'" [schemeType]="'ordinal'"
          [customColors]="appAutoscalerAppMetricLegend.legendColor" [results]="appAutoscalerAppMetricLegend.legendValue"
          [legend]="true" [animations]="true" [xAxis]="true" [yAxis]="true" [showXAxisLabel]="true"
          [showYAxisLabel]="true" [tooltipDisabled]="false" [yAxisLabel]="metricData[0].entity.unit"
          [showGridLines]="true" [barPadding]="'2'" [roundDomains]="false" [roundEdges]="true"
          [yScaleMax]="metricData[0].entity.chartMaxValue" [showDataLabel]="false" (select)="select($event)">
        </ngx-charts-bar-vertical>
      </div>
    </div>
  </mat-card-content>
</mat-card>