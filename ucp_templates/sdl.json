{
  "name": "helion-console",
  "version": "{{TAG}}",
  "vendor": "HPE",
  "volumes": [
    {
      "name": "stolon-data",
      "size_gb": 10,
      "filesystem": "ext4",
      "shared": false
    }
  ],
  "components": [
    {
      "name": "cnap-console-nginx",
      "version": "1.0.0",
      "vendor": "HPE",
      "external_name": "cnap-console-nginx",
      "image": "{{REGISTRY}}/helioncf/cnap-console-server:{{TAG}}",
      "min_RAM_mb": 256,
      "min_disk_gb": 1,
      "min_VCPU": 1,
      "platform": "linux-x86_64",
      "workload_type": "container",
      "min_instances": 1,
      "max_instances": 1,
      "service_ports": [
        {
          "name": "api",
          "protocol": "TCP",
          "source_port": 80,
          "target_port": 80,
          "public": true
        },
        {
          "name": "api-443",
          "protocol": "TCP",
          "source_port": 443,
          "target_port": 443,
          "public": true
        }
      ]
    },
    {
      "name": "pp",
      "version": "1.0.0",
      "vendor": "HPE",
      "external_name": "pp",
      "image": "{{REGISTRY}}/helioncf/cnap-console-proxy:{{TAG}}",
      "min_RAM_mb": 256,
      "min_disk_gb": 1,
      "min_VCPU": 1,
      "platform": "linux-x86_64",
      "workload_type": "container",
      "min_instances": 1,
      "max_instances": 1,
      "service_ports": [
        {
          "name": "proxy",
          "protocol": "TCP",
          "source_port": 3003,
          "target_port": 3003,
          "public": true
        }
      ],
      "parameters": [
        {
          "name": "PGSQL_USER"
        },
        {
          "name": "PGSQL_PASSWORD"
        },
        {
          "name": "PGSQL_DATABASE"
        },
        {
          "name": "PGSQL_HOST"
        },
        {
          "name": "PGSQL_PORT"
        },
        {
          "name": "PGSQL_CONNECT_TIMEOUT"
        },
        {
          "name": "PGSQL_SSL_MODE"
        },
        {
          "name": "CERT"
        },
        {
          "name": "CERT_KEY"
        },
        {
          "name": "HTTP_CLIENT_TIMEOUT_IN_SECS"
        },
        {
          "name": "SKIP_TLS_VERIFICATION"
        },
        {
          "name": "TLS_ADDRESS"
        },
        {
          "name": "CONSOLE_CLIENT"
        },
        {
          "name": "CONSOLE_CLIENT_SECRET"
        },
        {
          "name": "HCE_CLIENT"
        },
        {
          "name": "HCF_CLIENT"
        },
        {
          "name": "HCF_CLIENT_SECRET"
        },
        {
          "name": "UAA_ENDPOINT"
        },
        {
          "name": "ALLOWED_ORIGINS"
        },
        {
          "name": "SESSION_STORE_SECRET"
        },
        {
          "name": "GITHUB_OAUTH_CLIENT_ID"
        },
        {
          "name": "GITHUB_OAUTH_CLIENT_SECRET"
        },
        {
          "name": "GITHUB_OAUTH_STATE"
        }
      ]
    },
    {
      "name": "portal-db",
      "version": "1.0.0",
      "vendor": "HPE",
      "external_name": "portal-db",
      "image": "docker.io/postgres:9.5",
      "min_RAM_mb": 256,
      "min_disk_gb": 1,
      "min_VCPU": 1,
      "platform": "linux-x86_64",
      "workload_type": "container",
      "capabilities": [],
      "affinity": [],
      "labels": [
        "label1",
        "label2"
      ],
      "min_instances": 1,
      "max_instances": 1,
      "service_ports": [
        {
          "name": "portal-db",
          "protocol": "TCP",
          "source_port": 5432,
          "target_port": 5432,
          "public": true
        }
      ],
      "volume_mounts": [],
      "parameters": [
        {
          "name": "POSTGRES_PASSWORD"
        },
        {
          "name": "POSTGRES_USER"
        },
        {
          "name": "PGDATA"
        }
      ]
    }
  ],
  "preflight": [],
  "postflight": [
    {
      "name": "configuration",
      "version": "0.1.0",
      "vendor": "HPE",
      "external_name": "configuration",
      "image": "{{REGISTRY}}/helioncf/cnap-console-database-configuration:{{TAG}}",
      "min_RAM_mb": 512,
      "min_disk_gb": 1,
      "platform": "linux-x86_64",
      "workload_type": "container",
      "parameters": [
        {
          "name": "DB_HOST"
        },
        {
          "name": "DB"
        },
        {
          "name": "CFGDB_PORT"
        },
        {
          "name": "DB_USER"
        },
        {
          "name": "DB_PW_FILE"
        },
        {
          "name": "STRATOS_DB"
        },
        {
          "name": "STRATOS_USER"
        },
        {
          "name": "STRATOS_PWD"
        },
        {
          "name": "SQL"
        },
        {
          "name": "POSTGRES_USER"
        },
        {
          "name": "POSTGRES_PASSWORD"
        }
      ],
      "min_instances": 1,
      "max_instances": 1,
      "retry_count": 100
    }
  ],
  "parameters": [
    {
        "name": "PGSQL_USER",
        "description": "Postgres username",
        "default": "stolon",
        "example": "stolon",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "PGSQL_PASSWORD",
        "description": "Postgres password",
        "default": "stolon",
        "example": "stolon",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "PGSQL_DATABASE",
        "description": "Postgres database name",
        "default": "portal-db",
        "example": "portal-db",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "PGSQL_HOST",
        "description": "Postgres hostname",
        "default": "portal-db",
        "example": "postal-db",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "PGSQL_PORT",
        "description": "Postgres port",
        "default": "5432",
        "example": "5432",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "PGSQL_CONNECT_TIMEOUT",
        "description": "Postgres password",
        "default": "10",
        "example": "10",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "PGSQL_SSL_MODE",
        "description": "Postgres SSL mode",
        "default": "disable",
        "example": "disable",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "POSTGRES_DB",
        "description": "Postgres database name",
        "default": "stratos-db",
        "example": "stratos-db",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "POSTGRES_PASSWORD",
        "description": "Postgres password",
        "default": "stolon",
        "example": "stolon",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "POSTGRES_USER",
        "description": "Postgres username",
        "default": "stolon",
        "example": "stolon",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "PGDATA",
        "description": "placeholder",
        "default": "/database",
        "example": "/database",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "DB_USER",
        "description": "PostgreSQL user",
        "default": "stratos",
        "example": "stratos",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "DB_HOST",
        "description": "PostgreSQL host address",
        "default": "portal-db",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "CFGDB_PORT",
        "description": "PostgreSQL port",
        "default": "5432",
        "example": "5432",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
       "name": "DB",
       "description": "PostgreSQL default db ??",
       "default": "postgres",
       "example": "postgres",
       "data_type": "string",
       "required": true,
       "secret": false
    },
    {
        "name": "CERT",
        "description": "Certificate",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "CERT_KEY",
        "description": "Certificate Key",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "HTTP_CLIENT_TIMEOUT_IN_SECS",
        "description": "HTTP client timeoout",
        "default": "10",
        "example": "10",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "SKIP_TLS_VERIFICATION",
        "description": "To skip TLS or now?",
        "default": "true",
        "example": "true",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "TLS_ADDRESS",
        "description": "TLS Address",
        "default": ":3003",
        "example": ":3003",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "CONSOLE_CLIENT",
        "description": "Console client",
        "default": "console",
        "example": "console",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "CONSOLE_CLIENT_SECRET",
        "description": "Console client secret",
        "default": "",
        "example": "",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "HCE_CLIENT",
        "description": "HCE client",
        "default": "console",
        "example": "console",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "HCF_CLIENT",
        "description": "HCF client",
        "default": "cf",
        "example": "cf",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "HCF_CLIENT_SECRET",
        "description": "HCF client secret",
        "default": "",
        "example": "",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "UAA_ENDPOINT",
        "description": "UAA endpoint",
        "default": "https://login.hcf.helion.lol/oauth/token",
        "example": "https://login.hcf.helion.lol/oauth/token",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "ALLOWED_ORIGINS",
        "description": "Allowed origins - TBD",
        "default": "https://localhost,https://127.0.0.1",
        "example": "https://localhost,https://127.0.0.1",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "SESSION_STORE_SECRET",
        "description": "Session store secret",
        "default": "cookiesecret",
        "example": "cookiesecret",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "DB_PW_FILE",
        "description": "Database password file",
        "default": "/etc/secrets/stolon",
        "example": "/etc/secrets/stolon",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "STRATOS_DB",
        "description": "Stratos database",
        "default": "stratos-db",
        "example": "stratos-db",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "STRATOS_USER",
        "description": "Stratos user",
        "default": "stratos",
        "example": "stratos",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "STRATOS_PWD",
        "description": "Stratos password",
        "default": "stratos",
        "example": "stratos",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "SQL",
        "description": "Initial Stratos database schema",
        "default": "./InitialSchema.sql",
        "example": "./InitialSchema.sql",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "GITHUB_OAUTH_CLIENT_ID",
        "description": "GitHub client ID for OAuth",
        "default": "",
        "example": "",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "GITHUB_OAUTH_CLIENT_SECRET",
        "description": "GitHub client secret for OAuth",
        "default": "",
        "example": "",
        "data_type": "string",
        "required": true,
        "secret": false
    },
    {
        "name": "GITHUB_OAUTH_STATE",
        "description": "GitHub random state string for OAuth",
        "default": "",
        "example": "",
        "data_type": "string",
        "required": true,
        "secret": false
    }
  ]
}
