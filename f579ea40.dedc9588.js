(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{138:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return i})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return s}));var o=n(2),a=n(6),l=(n(0),n(145)),r={title:"Frontend Extensions",sidebar_label:"Frontend Extensions"},i={id:"extensions/frontend",isDocsHomePage:!1,title:"Frontend Extensions",description:"An example illustrating the various front-end extension points of Stratos is included in the folder examples/custom-src.",source:"@site/docs/extensions/frontend.md",permalink:"/docs/extensions/frontend",editUrl:"https://github.com/cloudfoundry/stratos/edit/master/website/docs/extensions/frontend.md",sidebar_label:"Frontend Extensions",sidebar:"docs",previous:{title:"Theming Stratos",permalink:"/docs/extensions/theming"},next:{title:"Backend Plugins",permalink:"/docs/extensions/backend"}},c=[{value:"Extension Points",id:"extension-points",children:[{value:"Side Navigation",id:"side-navigation",children:[]},{value:"Custom Tabs",id:"custom-tabs",children:[]},{value:"Custom Actions",id:"custom-actions",children:[]}]},{value:"Example: Adding a Custom Tab",id:"example-adding-a-custom-tab",children:[{value:"Create a new module",id:"create-a-new-module",children:[]},{value:"Create a new Component for our Tab",id:"create-a-new-component-for-our-tab",children:[]},{value:"Add Decorator to make this Component an Extension",id:"add-decorator-to-make-this-component-an-extension",children:[]},{value:"Mark the component as an entry component",id:"mark-the-component-as-an-entry-component",children:[]},{value:"Run it",id:"run-it",children:[]}]}],p={rightToc:c};function s(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(l.b)("wrapper",Object(o.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,"An example illustrating the various front-end extension points of Stratos is included in the folder ",Object(l.b)("inlineCode",{parentName:"p"},"examples/custom-src"),"."),Object(l.b)("p",null,"To include the customizations in this example, either copy or symlink the ",Object(l.b)("inlineCode",{parentName:"p"},"examples/custom-src")," to ",Object(l.b)("inlineCode",{parentName:"p"},"custom-src")," at the top-level of the Stratos repository."),Object(l.b)("p",null,"Next, run the customization script (this is done automatically when you do an ",Object(l.b)("inlineCode",{parentName:"p"},"npm install"),") with:"),Object(l.b)("pre",null,Object(l.b)("code",Object(o.a)({parentName:"pre"},{}),"npm run customize\n")),Object(l.b)("p",null,"You can now run Stratos locally to see the customizations - see the ",Object(l.b)("a",Object(o.a)({parentName:"p"},{href:"../developers/developers-guide"}),"Developer's Guide")," for details."),Object(l.b)("p",null,"For a walk-through of extending Stratos, see ",Object(l.b)("a",Object(o.a)({parentName:"p"},{href:"#example-adding-a-custom-tab"}),"Example: Adding a Custom Tab"),"."),Object(l.b)("h2",{id:"extension-points"},"Extension Points"),Object(l.b)("h3",{id:"side-navigation"},"Side Navigation"),Object(l.b)("p",null,"New items can be added to the Side Navigation menu with extensions."),Object(l.b)("p",null,"To do so, annotate the routes for your extension with custom metadata, which Stratos will then pick up and add to the side menu."),Object(l.b)("p",null,"A full example is in the folder ",Object(l.b)("inlineCode",{parentName:"p"},"examples/custom-src/frontend/app/custom/nav-extension"),"."),Object(l.b)("p",null,"Your route should have the following metadata in the ",Object(l.b)("inlineCode",{parentName:"p"},"data")," field:"),Object(l.b)("pre",null,Object(l.b)("code",Object(o.a)({parentName:"pre"},{}),"    stratosNavigation: {\n      text: '<TITLE>',\n      matIcon: '<ICON NAME>'\n    }\n")),Object(l.b)("p",null,"Where ",Object(l.b)("inlineCode",{parentName:"p"},"<TITLE>")," is the text label to show in the side navigation and ",Object(l.b)("inlineCode",{parentName:"p"},"<ICON NAME>")," is the icon to use."),Object(l.b)("p",null,"You should place your route declaration in a module named ",Object(l.b)("inlineCode",{parentName:"p"},"CustomRoutingModule")," in the file ",Object(l.b)("inlineCode",{parentName:"p"},"custom-src/frontend/app/custom/custom-routing.module.ts"),"."),Object(l.b)("p",null,"An example routing module would be:"),Object(l.b)("pre",null,Object(l.b)("code",Object(o.a)({parentName:"pre"},{}),"import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst customRoutes: Routes = [{\n  path: 'example',\n  loadChildren: 'app/custom/nav-extension/nav-extension.module#NavExtensionModule',\n  data: {\n    stratosNavigation: {\n      text: 'Example',\n      matIcon: 'extension'\n    }\n  }\n}];\n\n@NgModule({\n  imports: [\n    RouterModule.forRoot(customRoutes),\n  ],\n  declarations: []\n})\nexport class CustomRoutingModule { }\n")),Object(l.b)("p",null,"This approach ensures that the Angular compiler creates a separate chunk for the extension at compile time."),Object(l.b)("h3",{id:"custom-tabs"},"Custom Tabs"),Object(l.b)("p",null,"Tabs can be added to the following views in Stratos:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"The Application view that shows the detail of an application"),Object(l.b)("li",{parentName:"ul"},"The Cloud Foundry view that shows detail for a Cloud Foundry"),Object(l.b)("li",{parentName:"ul"},"The Cloud Foundry Org view that shows detail for a Cloud Foundry organization"),Object(l.b)("li",{parentName:"ul"},"The Cloud Foundry Space view that shows detail for a Cloud Foundry space")),Object(l.b)("p",null,"For example:"),Object(l.b)("p",null,Object(l.b)("img",Object(o.a)({parentName:"p"},{src:"images/extensions/app-tab-example.png",alt:"Example Application tab extension"}))),Object(l.b)("p",null,"The approach for all of these is the same:"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"Create a new component that will provide the tab contents"),Object(l.b)("li",{parentName:"ol"},"Ensure that your component is included in the ",Object(l.b)("inlineCode",{parentName:"li"},"EntryComponent")," section of your custom module"),Object(l.b)("li",{parentName:"ol"},"Decorate the component with the ",Object(l.b)("inlineCode",{parentName:"li"},"StratosTab")," decorator, for example:")),Object(l.b)("pre",null,Object(l.b)("code",Object(o.a)({parentName:"pre"},{}),"@StratosTab({\n  type: StratosTabType.Application,\n  label: '<LABEL>',\n  link: '<LINK>'\n})\n")),Object(l.b)("p",null,"Where:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"< TYPE > indicates where the tab should appear and can be:",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"StratosTabType.Application - Application View"),Object(l.b)("li",{parentName:"ul"},"StratosTabType.CloudFoundry - Cloud Foundry view"),Object(l.b)("li",{parentName:"ul"},"StratosTabType.CloudFoundryOrg - Cloud Foundry Org view"),Object(l.b)("li",{parentName:"ul"},"StratosTabType.CloudFoundrySpace - Cloud Foundry Space view"))),Object(l.b)("li",{parentName:"ul"},"< LABEL > is the text label to use for the tab"),Object(l.b)("li",{parentName:"ul"},"< LINK > is the name to use for the route (this must only contain characters permitted in URLs)")),Object(l.b)("p",null,"An example is included in the file ",Object(l.b)("inlineCode",{parentName:"p"},"examples/custom-src/frontend/app/custom/app-tab-extension"),"."),Object(l.b)("h3",{id:"custom-actions"},"Custom Actions"),Object(l.b)("p",null,"Actions can be added to the following views in Stratos:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"The Application Wall view that shows all applications"),Object(l.b)("li",{parentName:"ul"},"The Application view that shows the detail of an application"),Object(l.b)("li",{parentName:"ul"},"The Cloud Foundry view that shows detail for a Cloud Foundry"),Object(l.b)("li",{parentName:"ul"},"The Cloud Foundry Org view that shows detail for a Cloud Foundry organization"),Object(l.b)("li",{parentName:"ul"},"The Cloud Foundry Space view that shows detail for a Cloud Foundry space"),Object(l.b)("li",{parentName:"ul"},"The Endpoints view that shows all endpoints")),Object(l.b)("p",null,"An action is a icon button that appears at the top-right of a View. For example:"),Object(l.b)("p",null,Object(l.b)("img",Object(o.a)({parentName:"p"},{src:"images/extensions/appwall-action-example.png",alt:"Example Application action extension"}))),Object(l.b)("p",null,"The approach for all of these is the same:"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"Create a new component that will provide the contents to show when the action is clicked"),Object(l.b)("li",{parentName:"ol"},"Ensure that your component is included in the ",Object(l.b)("inlineCode",{parentName:"li"},"EntryComponent")," section of your custom module"),Object(l.b)("li",{parentName:"ol"},"Decorate the component with the ",Object(l.b)("inlineCode",{parentName:"li"},"StratosAction")," decorator, for example:")),Object(l.b)("pre",null,Object(l.b)("code",Object(o.a)({parentName:"pre"},{}),"@StratosAction({\n  type: StratosActionType.Applications,\n  label: '<LABEL>',\n  link: '<LINK>',\n  icon: '<ICON>\n})\n")),Object(l.b)("p",null,"Where:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"< TYPE > indicates where the action should appear and can be:",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"StratosActionType.Applications - Application Wall View"),Object(l.b)("li",{parentName:"ul"},"StratosActionType.Application - Application View"),Object(l.b)("li",{parentName:"ul"},"StratosActionType.CloudFoundry - Cloud Foundry view"),Object(l.b)("li",{parentName:"ul"},"StratosActionType.CloudFoundryOrg - Cloud Foundry Org view"),Object(l.b)("li",{parentName:"ul"},"StratosActionType.CloudFoundrySpace - Cloud Foundry Space view"),Object(l.b)("li",{parentName:"ul"},"StratosActionType.Endpoints - Endpoints view"))),Object(l.b)("li",{parentName:"ul"},"< ICON > is the icon to show"),Object(l.b)("li",{parentName:"ul"},"< LABEL > is the text label to use for the tooltip of the icon (optional)"),Object(l.b)("li",{parentName:"ul"},"< LINK > is the name to use for the route (this must only contain characters permitted in URLs)")),Object(l.b)("p",null,"An example is included in the file ",Object(l.b)("inlineCode",{parentName:"p"},"examples/custom-src/frontend/app/custom/app-action-extension"),"."),Object(l.b)("h2",{id:"example-adding-a-custom-tab"},"Example: Adding a Custom Tab"),Object(l.b)("p",null,"In this example, we will walk through extending the Stratos front-end."),Object(l.b)("p",null,"This walk-through assumes that you have installed the Angular CLI globally - this can be done with ",Object(l.b)("inlineCode",{parentName:"p"},"npm install -g @angular/cli"),"."),Object(l.b)("h3",{id:"create-a-new-module"},"Create a new module"),Object(l.b)("p",null,"First, create the custom-src folder structure - from the top-level of the Stratos repository run:"),Object(l.b)("pre",null,Object(l.b)("code",Object(o.a)({parentName:"pre"},{}),"mkdir -p custom-src/frontend/app/custom\nmkdir -p custom-src/frontend/assets/custom\n")),Object(l.b)("p",null,"Next, run the customize task:"),Object(l.b)("pre",null,Object(l.b)("code",Object(o.a)({parentName:"pre"},{}),"npm run customize\n")),Object(l.b)("p",null,"This will symlink our custom folder into the Stratos application source folder."),Object(l.b)("p",null,"Next, use the Angular CLI to create the root module for our custom code with:"),Object(l.b)("pre",null,Object(l.b)("code",Object(o.a)({parentName:"pre"},{}),"ng generate module custom\n")),Object(l.b)("p",null,"This create a new Angular module ",Object(l.b)("inlineCode",{parentName:"p"},"CustomModule"),"."),Object(l.b)("p",null,"Run the customize script again, now that that we have created the custom module with:"),Object(l.b)("pre",null,Object(l.b)("code",Object(o.a)({parentName:"pre"},{}),"npm run customize\n")),Object(l.b)("h3",{id:"create-a-new-component-for-our-tab"},"Create a new Component for our Tab"),Object(l.b)("p",null,"Create a new Angular component with the CLI:"),Object(l.b)("pre",null,Object(l.b)("code",Object(o.a)({parentName:"pre"},{}),"ng generate component custom/example-tab-extension\n")),Object(l.b)("h3",{id:"add-decorator-to-make-this-component-an-extension"},"Add Decorator to make this Component an Extension"),Object(l.b)("p",null,"In a text editor, open the file:"),Object(l.b)("pre",null,Object(l.b)("code",Object(o.a)({parentName:"pre"},{}),"src/frontend/app/custom/example-tab-extension/example-tab-extension.component.ts\n")),Object(l.b)("p",null,"Add the following decorator to the component at the top of the file:"),Object(l.b)("pre",null,Object(l.b)("code",Object(o.a)({parentName:"pre"},{}),"import { StratosTab, StratosTabType } from '../../core/extension/extension-service';\n\n@StratosTab({\n  type: StratosTabType.Application,\n  label: 'Example App Tab',\n  link: 'example'\n})\n")),Object(l.b)("p",null,"The file should now look like this:"),Object(l.b)("pre",null,Object(l.b)("code",Object(o.a)({parentName:"pre"},{}),"import { Component, OnInit } from '@angular/core';\nimport { StratosTab, StratosTabType } from '../../core/extension/extension-service';\n\n@StratosTab({\n  type: StratosTabType.Application,\n  label: 'Example App Tab',\n  link: 'example'\n})\n@Component({\n  selector: 'app-example-tab-extension',\n  templateUrl: './example-tab-extension.component.html',\n  styleUrls: ['./example-tab-extension.component.scss']\n})\nexport class ExampleTabExtensionComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n")),Object(l.b)("p",null,"Save the file."),Object(l.b)("h3",{id:"mark-the-component-as-an-entry-component"},"Mark the component as an entry component"),Object(l.b)("p",null,"The last thing we need to do is to mark our Extension component as an entry component."),Object(l.b)("p",null,"To do this, in a text editor, open the file ",Object(l.b)("inlineCode",{parentName:"p"},"src/frontend/app/custom/custom.module.ts")," and add the entry components section so it looks like this:"),Object(l.b)("pre",null,Object(l.b)("code",Object(o.a)({parentName:"pre"},{}),"@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [ExampleTabExtensionComponent],\n  entryComponents: [ExampleTabExtensionComponent]\n})\nexport class CustomModule { }\n")),Object(l.b)("h3",{id:"run-it"},"Run it"),Object(l.b)("p",null,"You should now be able to run Stratos locally and see this new tab on the application page for an application - as illustrated below:"),Object(l.b)("p",null,Object(l.b)("img",Object(o.a)({parentName:"p"},{src:"images/extensions/tab-example.png",alt:"Example tab extension"}))))}s.isMDXComponent=!0},145:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return d}));var o=n(0),a=n.n(o);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},l=Object.keys(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=a.a.createContext({}),s=function(e){var t=a.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},b=function(e){var t=s(e.components);return a.a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=a.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,l=e.originalType,r=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),b=s(n),m=o,d=b["".concat(r,".").concat(m)]||b[m]||u[m]||l;return n?a.a.createElement(d,i(i({ref:t},p),{},{components:n})):a.a.createElement(d,i({ref:t},p))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var l=n.length,r=new Array(l);r[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:o,r[1]=i;for(var p=2;p<l;p++)r[p]=n[p];return a.a.createElement.apply(null,r)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);